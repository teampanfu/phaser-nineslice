!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.NineSlice=e():t.NineSlice=e()}(self,(()=>(()=>{"use strict";var t={d:(e,o)=>{for(var r in o)t.o(o,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function r(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,o){var r=n(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:o):i.value}},i.apply(this,arguments)}function n(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}function h(t,e){return h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},h(t,e)}function f(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}t.r(e),t.d(e,{NineSlice:()=>u,Plugin:()=>R});var c=function(t){return{topLeft:{x:t.topLeft.width,y:t.topLeft.height},topRight:{x:t.topRight.width,y:t.topRight.height},bottomLeft:{x:t.bottomLeft.width,y:t.bottomLeft.height},bottomRight:{x:t.bottomRight.width,y:t.bottomRight.height}}},u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(l,Phaser.GameObjects.RenderTexture);var e,o,n,u,s=(n=l,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=a(n);if(u){var o=a(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return f(this,t)});function l(t,e,o){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var i=o.x,n=o.y,h=o.width,f=o.height;(r=s.call(this,t,i,n,h,f)).sliceConfig=function(t){if("number"==typeof t.sourceLayout.width){var e=t.sourceLayout,o=e.width,r=e.height;t.sourceLayout={topLeft:{width:o,height:r}}}var i=t.sourceLayout;i.topRight=i.topRight||i.topLeft,i.bottomLeft=i.bottomLeft||i.topLeft,i.bottomRight=i.bottomRight||i.topLeft;var n=Math.max(i.topLeft.height,i.topRight.height),h=Math.max(i.topRight.width,i.bottomRight.width),f=Math.max(i.bottomLeft.height,i.bottomRight.height),a=Math.max(i.topLeft.width,i.bottomLeft.width);return t.safeOffsets||(t.safeOffsets={top:n,right:h,bottom:f,left:a}),t}(e);var a=r.sliceConfig,c=a.sourceKey,u=a.sourceFrame;if(!c)throw new Error("NineSlice requires a texture key to be specified.");if(r.sourceTexture=t.sys.textures.get(r.sliceConfig.sourceKey),!r.sourceTexture||"__MISSING"===r.sourceTexture.key)throw new Error("Specified texture key '".concat(c,"' not found."));r.frameCache={};var y=u||"__BASE";return r.sourceFrame=r.sourceTexture.get(y),r.initFrames(),r.initialized=!0,r.resize(h,f),r}return e=l,o=[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._debugGraphic&&(this._debugGraphic.clear(),this.drawFrames(),this.updateSafeBounds())}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._debugGraphic&&(this._debugGraphic.clear(),this.drawFrames(),this.updateSafeBounds())}},{key:"drawFrames",value:function(){var t=this;if(this.initialized){this._debugGraphic&&this._debugGraphic.lineStyle(1,16711680);var e=c(this.sliceConfig.sourceLayout),o=this.frameCache,r=function(e,o,r,i,n){if(i>0&&n>0){t._debugGraphic&&t._debugGraphic.strokeRect(t.x+o,t.y+r,i,n);var h=t.scene.make.image({key:t.sourceTexture.key,frame:e.name,x:0,y:0}),f=i/e.width,a=n/e.height;h.setOrigin(0).setScale(f,a),t.draw(h,o,r),h.destroy()}};this.clear();var i=Math.min(e.topLeft.x,e.bottomLeft.x),n=Math.min(e.topRight.x,e.bottomRight.x),h=Math.min(e.topLeft.y,e.topRight.y),f=Math.min(e.bottomLeft.y,e.bottomRight.y);r(o.center,i,h,this.width-i-n,this.height-h-f),r(o.topMiddle,e.topLeft.x,0,this.width-e.topLeft.x-e.topRight.x,o.topMiddle.height),r(o.bottomMiddle,e.bottomLeft.x,this.height-o.bottomMiddle.height,this.width-e.bottomLeft.x-e.bottomRight.x,o.bottomMiddle.height),r(o.leftMiddle,0,e.topLeft.y,o.leftMiddle.width,this.height-e.topLeft.y-e.bottomLeft.y),r(o.rightMiddle,this.width-e.topRight.x,e.topRight.y,o.rightMiddle.width,this.height-e.topRight.y-e.bottomRight.y),r(o.topLeft,0,0,e.topLeft.x,e.topLeft.y),r(o.topRight,this.width-e.topRight.x,0,e.topRight.x,e.topRight.y),r(o.bottomRight,this.width-e.bottomRight.x,this.height-e.bottomRight.y,e.bottomRight.x,e.bottomRight.y),r(o.bottomLeft,0,this.height-e.bottomLeft.y,e.bottomLeft.x,e.bottomLeft.y)}}},{key:"enableDebugDraw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._debugGraphic&&this._debugGraphic.clear(),t?this._debugGraphic=this.scene.add.graphics(this.x,this.y):(this._debugGraphic.destroy(),this._debugGraphic=null),this.drawFrames(),this.updateSafeBounds()}},{key:"initFrames",value:function(){var t=this,e=this.sourceTexture,o=this.sourceFrame.width,r=this.sourceFrame.height,i=this.sourceFrame.cutX,n=this.sourceFrame.cutY,h=function(o,r,h,f,a){var c="".concat(t.sliceConfig.sourceKey,"_").concat(t.sliceConfig.sourceFrame,"/").concat(o);e.has(c)?t.frameCache[o]=e.frames[o]:t.frameCache[o]=e.add(c,0,i+r,n+h,f,a)},f=c(this.sliceConfig.sourceLayout);h("topLeft",0,0,f.topLeft.x,f.topLeft.y),h("topRight",o-f.topRight.x,0,f.topRight.x,f.topRight.y),h("bottomRight",o-f.bottomRight.x,r-f.bottomRight.y,f.bottomRight.x,f.bottomRight.y),h("bottomLeft",0,r-f.bottomLeft.y,f.bottomLeft.x,f.bottomLeft.y),h("topMiddle",f.topLeft.x,0,o-(f.topLeft.x+f.topRight.x),Math.max(f.topLeft.y,f.topRight.y)),h("bottomMiddle",f.bottomLeft.x,r-Math.max(f.bottomLeft.y,f.bottomRight.y),o-(f.bottomLeft.x+f.bottomRight.x),Math.max(f.bottomLeft.y,f.bottomRight.y)),h("leftMiddle",0,f.topLeft.y,Math.max(f.topLeft.x,f.bottomLeft.x),r-(f.topLeft.y+f.bottomLeft.y)),h("rightMiddle",o-Math.max(f.topRight.x,f.bottomRight.x),f.topRight.y,Math.max(f.topRight.x,f.bottomRight.x),r-f.topRight.y-f.bottomRight.y);var a=Math.min(f.topLeft.x,f.bottomLeft.x),u=Math.min(f.topLeft.y,f.topRight.y);h("center",a,u,o-a-Math.min(f.topRight.x,f.bottomRight.x),r-u-Math.min(f.bottomRight.y,f.bottomLeft.y))}},{key:"resize",value:function(t,e){if(this.initialized){var o=this.sliceConfig.safeOffsets,r=o.left+o.right,n=o.top+o.bottom;console.log(r,n),console.log(t,e),t<r||e<n?console.error("Attempted to set NineSlice size less than minimum (".concat(r,"x").concat(n,").")):(i(a(l.prototype),"resize",this).call(this,t,e),this.drawFrames(),this.updateSafeBounds())}}},{key:"updateSafeBounds",value:function(){if(this.initialized&&this._debugGraphic){this._safeBounds||(this._safeBounds=new Phaser.Geom.Rectangle);var t=this.sliceConfig.safeOffsets,e=t.top,o=t.right,r=t.bottom,i=t.left;console.log(e,o,r,i);var n=this.x+i,h=this.y+e,f=this.width-(i+o),a=this.height-(e+r),c=this._safeBounds,u=c.x,s=c.y,l=c.width,y=c.height;n===u&&h===s&&f===l&&a===y||this._safeBounds.setTo(n,h,f,a),this._debugGraphic.lineStyle(1,65280),this._debugGraphic.strokeRectShape(this._safeBounds)}}}],o&&r(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),l}();function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var r,i,n=[],h=!0,f=!1;try{for(o=o.call(t);!(h=(r=o.next()).done)&&(n.push(r.value),!e||n.length!==e);h=!0);}catch(t){f=!0,i=t}finally{try{h||null==o.return||o.return()}finally{if(f)throw i}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return y(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?y(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}var p=function(t){switch(t.length){case 1:return[t[0],t[0],t[0],t[0]];case 2:return[t[0],t[1],t[0],t[1]];case 3:return[t[0],t[1],t[2],t[1]];case 4:return t}throw new Error("Received ".concat(arr.length," offset values, expected 1 to 4."))};function g(t,e){if(2===e.length)return new u(this.scene,e);if(e.length<6)throw new Error("Expected at least 6 arguments to NineSlice creator, received ".concat(e.length,"."));e.length>7&&console.warn("Expected less than 7 arguments to NineSlice creator, received ".concat(e.length,"."));var o=l(e,6),r=o[0],i=o[1],n=o[2],h=o[3],f=o[4],a=o[5],c={},y={x:r,y:i,width:n,height:h};if("string"==typeof f)c.sourceKey=f;else{var g=f.key,b=f.frame;c.sourceKey=g,"string"!=typeof b&&"number"!=typeof b||(c.sourceFrame=b)}if("number"==typeof a)c.sourceLayout={width:a,height:a};else if(Array.isArray(a)){var m=l(p(a),4),d=m[0],w=m[1],x=m[2],R=m[3];c.sourceLayout={topLeft:{width:R,height:d},topRight:{width:w,height:d},bottomLeft:{width:R,height:x},bottomRight:{width:w,height:x}}}else c.sourceLayout=a;if(e.length>6){var v=e[6];if("number"==typeof v)c.safeOffsets={top:v,right:v,bottom:v,left:v};else{if(!Array.isArray(v))throw new Error("Expected type number or array for argument 7, got ".concat(s(v)));var L=l(p(v),4),S=L[0],_=L[1],O=L[2],M=L[3];c.safeOffsets={top:S,right:_,bottom:O,left:M}}}return new u(t,c,y)}function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function m(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e){return d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},d(t,e)}function w(t,e){if(e&&("object"===b(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}var R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(h,Phaser.Plugins.BasePlugin);var e,o,r,i,n=(r=h,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=x(r);if(i){var o=x(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return w(this,t)});function h(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),e=n.call(this,t),t.registerGameObject("nineslice",e.addNineSlice,e.makeNineSlice),e}return e=h,o=[{key:"addNineSlice",value:function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];var r=new g(this.scene,e);return this.displayList.add(r),r}},{key:"makeNineSlice",value:function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return new g(this.scene,e)}}],o&&m(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),h}();return e})()));